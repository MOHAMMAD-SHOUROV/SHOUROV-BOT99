const moment = require('moment-timezone');


module.exports.config = {

Â Â name: "autotime",

Â Â version: "2.0.0",

Â Â credits: "KING_Shourov",

Â Â description: "Send royal sad captions every 30 minutes with stylish time in Dhaka timezone."

};


const sadCaptions = [

Â Â "ðŸ¥€ à¦•à¦·à§à¦Ÿ à¦ªà§‡à¦¤à§‡ à¦ªà§‡à¦¤à§‡ à¦…à¦­à§à¦¯à¦¸à§à¦¤ à¦¹à§Ÿà§‡ à¦—à§‡à¦›à¦¿à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ’” à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦à¦–à¦¨ à¦†à¦° à¦…à¦¨à§à¦­à¦¬ à¦¹à§Ÿ à¦¨à¦¾à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜¢ à¦†à¦®à¦¿ à¦¸à¦¬ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦«à§‡à¦²à§‡à¦›à¦¿, à¦¶à§à¦§à§ à¦¶à§à¦¬à¦¾à¦¸ à¦¨à¦¿à¦šà§à¦›à¦¿à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ¥º à¦¹à¦ à¦¾à§Ž à¦•à¦°à§‡à¦‡ à¦•à§‡à¦‰ à¦•à§‡à¦‰ à¦…à¦¨à§‡à¦• à¦…à¦šà§‡à¦¨à¦¾ à¦¹à§Ÿà§‡ à¦¯à¦¾à§Ÿà¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜” à¦¸à¦¬à¦¾à¦‡ à¦ªà¦¾à¦¶à§‡ à¦¥à¦¾à¦•à§‡, à¦¦à¦°à¦•à¦¾à¦°à§‡à¦° à¦¸à¦®à§Ÿ à¦›à¦¾à§œà¦¾à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜­ à¦•à¦¾à¦‰à¦•à§‡ à¦¬à§à¦à¦¾à¦¤à§‡ à¦ªà¦¾à¦°à¦¿ à¦¨à¦¾, à¦•à¦¤à¦Ÿà¦¾ à¦•à¦·à§à¦Ÿà§‡ à¦†à¦›à¦¿à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ’­ à¦•à¦¿à¦›à§ à¦¸à¦®à§à¦ªà¦°à§à¦• à¦¨à¦¾ à¦šà¦¾à¦‡à¦¤à§‡à¦“ à¦¶à§‡à¦· à¦¹à§Ÿà§‡ à¦¯à¦¾à§Ÿà¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜“ à¦¨à¦¿à¦œà§‡à¦° à¦•à¦¾à¦›à§‡à¦‡ à¦¨à¦¿à¦œà§‡à¦•à§‡ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦«à§‡à¦²à§‡à¦›à¦¿à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜© à¦®à¦¨à§‡à¦° à¦®à¦§à§à¦¯à§‡ à¦à¦•à¦Ÿà¦¾ à¦¶à§‚à¦¨à§à¦¯à¦¤à¦¾ à¦•à¦¾à¦œ à¦•à¦°à§‡ à¦¸à¦¬à¦¸à¦®à§Ÿà¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ–¤ à¦¹à¦¾à¦¸à¦¿ à¦¦à¦¿à§Ÿà§‡ à¦•à¦·à§à¦Ÿ à¦¢à¦¾à¦•à¦¤à§‡ à¦¹à§Ÿ, à¦•à¦¾à¦°à¦£ à¦¸à¦¬à¦¾à¦‡ à¦–à§à¦¶à¦¿ à¦¦à§‡à¦–à¦¤à§‡ à¦šà¦¾à§Ÿà¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ¥€ à¦®à¦¾à¦à§‡ à¦®à¦¾à¦à§‡ à¦¨à¦¿à¦œà§‡à¦° à¦…à¦¸à§à¦¤à¦¿à¦¤à§à¦¬à¦Ÿà¦¾à¦‡ à¦¹à¦¾à¦°à¦¿à§Ÿà§‡ à¦«à§‡à¦²à¦¿à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ’” à¦¯à¦¾à¦•à§‡ à¦­à§‡à¦¬à§‡à¦›à¦¿à¦²à¦¾à¦® à¦†à¦®à¦¾à¦°, à¦¸à§‡ à¦›à¦¿à¦² à¦…à¦¨à§à¦¯ à¦•à¦¾à¦°à§‹à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜” à¦­à¦¾à¦²à§‹ à¦¥à§‡à¦•à§‹, à¦†à¦®à¦¿ à¦†à¦° à¦¤à§‹à¦®à¦¾à¦° à¦®à¦¤à§‹ à¦¨à¦¾à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ¥º à¦•à¦¾à¦¨à§à¦¨à¦¾ à¦†à¦¸à§‡, à¦•à¦¾à¦°à¦£ à¦®à¦¨à§‡ à¦ªà§œà§‡ à¦¯à¦¾à§Ÿ à¦¤à§‹à¦®à¦¾à¦•à§‡à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜¢ à¦•à¦¿à¦›à§ à¦¬à§à¦¯à¦¥à¦¾ à¦à¦•à¦¾à¦‡ à¦¸à¦¹à§à¦¯ à¦•à¦°à¦¤à§‡ à¦¹à§Ÿà¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜­ à¦¨à¦¿à¦œà§‡à¦•à§‡ à¦—à§à¦Ÿà¦¿à§Ÿà§‡ à¦«à§‡à¦²à§‡à¦›à¦¿, à¦•à¦·à§à¦Ÿà§‡à¦° à¦­à§Ÿà§‡à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ¥€ à¦…à¦­à¦¿à¦®à¦¾à¦¨ à¦œà¦®à¦¤à§‡ à¦œà¦®à¦¤à§‡ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦«à§à¦°à¦¿à§Ÿà§‡ à¦¯à¦¾à§Ÿà¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ’­ à¦•à¦¿à¦›à§ à¦®à¦¾à¦¨à§à¦· à¦¸à§à¦®à§ƒà¦¤à¦¿ à¦¹à§Ÿà§‡ à¦¥à¦¾à¦•à§‡ à¦¶à§à¦§à§à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ–¤ à¦­à¦¾à¦²à§‹à¦¬à¦¾à¦¸à¦¾ à¦›à¦¿à¦², à¦†à¦›à§‡, à¦¥à¦¾à¦•à¦¬à§‡... à¦•à¦¿à¦¨à§à¦¤à§ à¦¤à§à¦®à¦¿ à¦¨à¦¾à¦‡à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ˜© à¦†à¦®à¦¿ à¦ à¦¿à¦• à¦†à¦›à¦¿, à¦à¦Ÿà¦¾à¦‡ à¦¸à¦¬à¦šà§‡à§Ÿà§‡ à¦¬à§œ à¦®à¦¿à¦¥à§à¦¯à§‡à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ’” à¦…à¦ªà§‡à¦•à§à¦·à¦¾ à¦•à¦°à§‡à¦›à¦¿à¦²à¦¾à¦®... à¦¤à§à¦®à¦¿ à¦†à¦¸à§‹à¦¨à¦¿à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯",

Â Â "ðŸ¥º à¦†à¦œà¦“ à¦¤à§‹à¦®à¦¾à¦° à¦•à¦¥à¦¾ à¦®à¦¨à§‡ à¦ªà§œà§‡à¥¤ðŠð¢ð§ð _ð’ð¡ð¨ð®ð«ð¨ð¯"

];


const sentToday = new Set();


function toStylishTime(date) {

Â Â let h = date.getHours();

Â Â let m = date.getMinutes();

Â Â const ampm = h >= 12 ? "ððŒ" : "ð€ðŒ";

Â Â h = h % 12 || 12;

Â Â const styledDigits = ['ðŸŽ','ðŸ','ðŸ','ðŸ‘','ðŸ’','ðŸ“','ðŸ”','ðŸ•','ðŸ–','ðŸ—'];

Â Â const style = n => n.toString().padStart(2, '0').split('').map(d => styledDigits[+d]).join('');

Â Â return `${style(h)} : ${style(m)} ${ampm}`;

}


async function sendSadCaption(api, threadList) {

Â Â const now = moment().tz('Asia/Dhaka').toDate();

Â Â const today = now.toISOString().split("T")[0];

Â Â const timeStyled = toStylishTime(now);


Â Â const unsent = sadCaptions

Â Â Â Â .map((text, index) => ({ text, index }))

Â Â Â Â .filter(({ index }) => !sentToday.has(`${today}-${index}`));


Â Â if (unsent.length === 0) return;


Â Â const chosen = unsent[Math.floor(Math.random() * unsent.length)];

Â Â sentToday.add(`${today}-${chosen.index}`);


Â Â const msg =Â 

Â Â Â Â `â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•[ ðŸ•°ï¸ ð™ð™„ð™ˆð™€ ]â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\n` +

Â Â Â Â `â•‘ Â  Â  Â  ${timeStyled} â”‚ ðŸ”° ðŠðˆðð† ð’ð‡ðŽð”ð‘ðŽð• - ððŽð“ âšœï¸\n` +

Â Â Â Â `â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n` +

Â Â Â Â `ðŸ–¤ ð’®ð’¶ð’¹ ð’žð’¶ð“…ð“‰ð’¾ð‘œð“ƒ:\n` +

Â Â Â Â `â ${chosen.text} âž\n\n` +

Â Â Â Â `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”à¼ºðŸ–¤à¼»â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”`;


Â Â for (const thread of threadList) {

Â Â Â Â api.sendMessage(msg, thread.threadID);

Â Â }

}


module.exports.run = async function({ api }) {

Â Â const threadList = await api.getThreadList(50, null, ["INBOX"]);

Â Â const interval = 30 * 60 * 1000; // à§©à§¦ à¦®à¦¿à¦¨à¦¿à¦Ÿ


Â Â // à¦¬à¦Ÿ à¦šà¦¾à¦²à§à¦° à¦¸à¦®à§Ÿà§‡à¦‡ à¦ªà§à¦°à¦¥à¦® à¦•à§à¦¯à¦¾à¦ªà¦¶à¦¨ à¦ªà¦¾à¦ à¦¾à¦¨à§‹ à¦¹à¦¬à§‡

Â Â await sendSadCaption(api, threadList);


Â Â // à¦¤à¦¾à¦°à¦ªà¦° à¦ªà§à¦°à¦¤à¦¿ à§©à§¦ à¦®à¦¿à¦¨à¦¿à¦Ÿà§‡ à¦ªà¦¾à¦ à¦¾à¦¬à§‡

Â Â setInterval(() => {

Â Â Â Â sendSadCaption(api, threadList);

Â Â }, interval);

};
